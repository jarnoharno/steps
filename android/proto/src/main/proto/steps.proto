package stepsproto;

option java_package = "com.hiit.steps";
option java_outer_classname = "StepsProtos";

// sensor events

message SensorEvent {
    repeated float value = 1;
}

message Location {
    required int64 utctime = 1; // milliseconds
    required double latitude = 2;
    required double longitude = 3;
    optional double accuracy = 4;
    optional double altitude = 5;
    optional double bearing = 6;
    optional double speed = 7;
}

message Sample {
    enum Type { SENSOR_EVENT = 1; LOCATION = 2; CONTROL = 3; }
    required string name = 1;
    required int64 timestamp = 2; // nanoseconds
    required Type type = 3;
    optional SensorEvent sensor_event = 4;
    optional Location location = 5;
    optional Control control = 6;
}

// control messages

message Start {
    required string name = 1;
}

message StartAck {
    required string id = 1;
}

message Stop {
    required string id = 1;
}

message Resume {
    required string id = 1;
}

message Control {
    enum Type {
        START = 1;
        START_ACK = 2;
        STOP = 3;
        RESUME = 4;
    }
    required Type type = 1;
    optional Start start = 2;
    optional StartAck start_ack = 3;
    optional Stop stop = 4;
    optional Resume resume = 5;
}